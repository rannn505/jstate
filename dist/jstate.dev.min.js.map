{"version":3,"sources":["jstate.dev.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","jstate","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","showDevTools","popup","open","location","reload","queue","isReady","__FLUSH__","postMessage","shift","setTimeout","opener","notifyReady","setState","_store","overwriteState","register","document","write","_devToolsTemplate2","default","__DEVTOOLS__","next","action","oldState","state","push","Object","defineProperty","value","_devToolsTemplate","obj","__esModule","./devToolsTemplate.html","./store","2","3","enumerable","get","_devTools","jQuery","STORE","keys","forEach","key","$","getOwnPropertyDescriptor","./devTools","4","_extends","assign","target","arguments","source","prototype","hasOwnProperty","_typeof","Symbol","iterator","constructor","_state","_middlewares","JSON","parse","stringify","partialState","TypeError","newState","middleware","chain","reduceRight","prev","cur","name"],"mappings":"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","file":"jstate.dev.min.js","sourcesContent":["/*********************************************************\n * jstate - Very friendly Flux implementation\n * @version v1.0.0\n * @link https://github.com/rannn505/jstate#readme\n * @copyright Copyright (c) 2017 Ran Cohen <rannn505@outlook.com>\n * @license MIT (http://www.opensource.org/licenses/mit-license.php)\n * @Compiled At: 2017-10-11\n  *********************************************************/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.jstate = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showDevTools = showDevTools;\n\nvar _store = require('./store');\n\nvar _devToolsTemplate = require('./devToolsTemplate.html');\n\nvar _devToolsTemplate2 = _interopRequireDefault(_devToolsTemplate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction showDevTools() {\n  var popup = window.open(null, 'jstate-dev-tools', 'width=400,height=600,menubar=no,location=no,resizable=yes,scrollbars=no,status=no');\n  popup.location.reload();\n  var queue = [],\n      isReady = false;\n  var __FLUSH__ = function __FLUSH__() {\n    if (queue.length === 0) return;\n    popup.postMessage(queue.shift(), '*');\n    return __FLUSH__();\n  };\n  setTimeout(function () {\n    popup.opener = {\n      notifyReady: function notifyReady() {\n        isReady = true;__FLUSH__();\n      },\n      setState: _store.setState,\n      overwriteState: _store.overwriteState,\n      register: _store.register\n    };\n    popup.document.write(_devToolsTemplate2.default);\n  }, 0);\n  var __DEVTOOLS__ = function __DEVTOOLS__(next) {\n    return function (action) {\n      var oldState = _store.state;\n      next(action);\n      queue.push({\n        action: action,\n        state: _store.state,\n        oldState: oldState\n      });\n      isReady && __FLUSH__();\n    };\n  };\n  (0, _store.register)(__DEVTOOLS__);\n}\n\n},{\"./devToolsTemplate.html\":2,\"./store\":4}],2:[function(require,module,exports){\nmodule.exports = \"<!DOCTYPE html>\\r\\n<html>\\r\\n<head>\\r\\n  <meta charset=\\\"utf-8\\\">\\r\\n  <meta content=\\\"IE=edge\\\" http-equiv=\\\"X-UA-Compatible\\\">\\r\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\">\\r\\n  <title> jState DevTools </title>\\r\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://fonts.googleapis.com/css?family=Inconsolata\\\" media=\\\"screen\\\">\\r\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css\\\" media=\\\"screen\\\">\\r\\n  <!-- <link rel=\\\"stylesheet\\\" href=\\\"./jsonviewer/jsonviewer.min.css\\\" media=\\\"screen\\\"> -->\\r\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdn.rawgit.com/rannn505/jstate/master/src/jsonviewer/jsonviewer.min.css\\\" media=\\\"screen\\\">\\r\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdn.rawgit.com/benjamine/jsondiffpatch/master/public/formatters-styles/html.css\\\" media=\\\"screen\\\">\\r\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdn.rawgit.com/benjamine/jsondiffpatch/master/public/formatters-styles/annotated.css\\\" media=\\\"screen\\\">\\r\\n  <style>body{position:fixed;top:0;bottom:0;left:0;right:0;padding:0;margin:0;color:#6e6e6e;list-style:none;background-color:#fff;font-family:Inconsolata,monospace;min-height:325px;min-width:325px}.container{width:100%;height:100%;overflow:hidden;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:column;flex-flow:column}.title{font-size:14px;text-align:center}.btns{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap}.actions{flex:10 2;overflow-y:auto;overflow-x:hidden}.btn{background-color:#fff;border:1px solid #ccc;color:#555;font-family:monospace;border-radius:1px;padding:5px 10px;text-align:center;text-decoration:none;display:inline-block;font-size:14px}.btn:hover{background-color:#ccc}.btn:active{background-color:#c1c1c1}.input{padding:6px 12px;font-size:14px;font-family:Inconsolata,monospace;line-height:1.42857143;color:#555;background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.hr{width:100%}@keyframes example{from{opacity:1}to{opacity:0}}.circle:before{position:absolute;top:10px;right:15px;color:#90ee90;content:'\\\\25CF';font-size:30px}::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:rgba(60,63,65,.8);box-shadow:inset 0 0 6px rgba(0,0,0,.5);-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}</style></head><body>\\r\\n  <div class=\\\"container\\\">\\r\\n    <div class=\\\"actions\\\" id=\\\"actions\\\">\\r\\n    </div>\\r\\n    <div class=\\\"btns\\\">\\r\\n      <input class=\\\"input\\\" placeholder=\\\"setState() &#x21B4\\\" style=\\\"flex:10 2\\\" type=\\\"text\\\" id=\\\"setState\\\">\\r\\n      <button class=\\\"btn\\\" id=\\\"reset\\\">Reset &#x21BA</button>\\r\\n      <button class=\\\"btn\\\" id=\\\"rollback\\\">Rollback &#x21B6</button>\\r\\n    </div>\\r\\n    <div class=\\\"title\\\">\\r\\n      jState DevTools\\r\\n    </div>\\r\\n  </div>\\r\\n  <script src=\\\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\\\"></script><script src=\\\"https://cdn.rawgit.com/rannn505/jstate/master/src/jsonviewer/jsonviewer.min.js\\\"></script><script src=\\\"https://cdn.rawgit.com/benjamine/jsondiffpatch/master/public/build/jsondiffpatch.min.js\\\"></script><script src=\\\"https://cdn.rawgit.com/benjamine/jsondiffpatch/master/public/build/jsondiffpatch-formatters.min.js\\\"></script><script>!function(){function renderNodes(){$(\\\"#actions\\\").empty(),$.each(nodes,function(e,t){$(\\\"#actions\\\").prepend('<div id=\\\"'+t.id+'\\\"></div>');var n=$(\\\"#\\\"+t.id);e===nodes.length-1&&n.addClass(\\\"animated slideInDown\\\"),n.append('<div id=\\\"'+t.id+'T\\\"></div>'),$(\\\"#\\\"+t.id+\\\"T\\\").jsonviewer(t,e===nodes.length-1),n.append('<button class=\\\"btn\\\" style=\\\"width: 100%;\\\"> Toggle diff &#x2195 </button>'),n.append('<div id=\\\"'+t.id+'B\\\" style=\\\"margin-top: 5px;\\\"></div>');var d=$(\\\"#\\\"+t.id+\\\"B\\\");$(\\\"#\\\"+t.id+\\\" .btn\\\").click(function(){d.toggle()}),d.hide();var o=diffpatcher.diff(t.oldState,t.state);\\\"undefined\\\"==typeof o?d.html(\\\"no diff\\\"):d.html(jsondiffpatch.formatters.html.format(o,t.oldState)),d.append('<hr class=\\\"hr\\\"/>')})}if(!window.jQuery)throw new Error(\\\"jQuery is not loaded. please check your network connectivity\\\");var nodes=[],id=0,diffpatcher=jsondiffpatch.create({objectHash:function(e,t){return\\\"undefined\\\"!=typeof e._id?e._id:\\\"undefined\\\"!=typeof e.id?e.id:\\\"$$index:\\\"+t}});jsondiffpatch.formatters.html.hideUnchanged(),$(window).on(\\\"message\\\",function(e){nodes.push({id:++id,action:e.originalEvent.data.action,state:e.originalEvent.data.state,oldState:e.originalEvent.data.oldState}),renderNodes()}),$(\\\"#setState\\\").on(\\\"keypress\\\",function(e){var code=e.keyCode?e.keyCode:e.which;if(13===code){e.preventDefault();var input=$(\\\"#setState\\\");try{opener.setState(eval(\\\"(\\\"+input.val()+\\\")\\\")),input.val(\\\"\\\")}catch(e){throw new Error(\\\"Invalid JSON\\\")}}}),$(\\\"#reset\\\").on(\\\"click\\\",function(){nodes=[],id=0,opener.overwriteState({}),renderNodes()}),$(\\\"#rollback\\\").on(\\\"click\\\",function(){nodes.pop()&&nodes.length>0?opener.overwriteState(nodes[nodes.length-1].state):opener.overwriteState({}),renderNodes()}),opener.notifyReady()}();</script></body></html>\";\n\n},{}],3:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _store = require('./store');\n\nObject.defineProperty(exports, 'state', {\n  enumerable: true,\n  get: function get() {\n    return _store.state;\n  }\n});\nObject.defineProperty(exports, 'setState', {\n  enumerable: true,\n  get: function get() {\n    return _store.setState;\n  }\n});\nObject.defineProperty(exports, 'register', {\n  enumerable: true,\n  get: function get() {\n    return _store.register;\n  }\n});\n\nvar _devTools = require('./devTools');\n\nObject.defineProperty(exports, 'showDevTools', {\n  enumerable: true,\n  get: function get() {\n    return _devTools.showDevTools;\n  }\n});\n\n\nif (!global.jQuery) {\n  global['$'] = {};\n}\nvar STORE = require('./store');\nObject.keys(STORE).forEach(function (key) {\n  return key !== 'overwriteState' && Object.defineProperty(global.$, key, Object.getOwnPropertyDescriptor(STORE, key));\n});\nObject.defineProperty(global.$, 'showDevTools', Object.getOwnPropertyDescriptor(require('./devTools'), 'showDevTools'));\nObject.defineProperty(global.$, '_', Object.getOwnPropertyDescriptor(STORE, 'state'));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./devTools\":1,\"./store\":4}],4:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _state = {};\nvar _middlewares = [];\n\nexports.default = {\n  get state() {\n    // return Object.assign({}, _state);\n    return JSON.parse(JSON.stringify(_state));\n  },\n  setState: function setState(partialState) {\n    if ((typeof partialState === 'undefined' ? 'undefined' : _typeof(partialState)) !== 'object') {\n      throw new TypeError('setState() takes an object as parameter');\n    }\n    _state = _extends({}, _state, partialState);\n  },\n  overwriteState: function overwriteState(newState) {\n    _state = _extends({}, newState);\n  },\n  register: function register(middleware) {\n    if (typeof middleware !== 'function') {\n      throw new TypeError('register() takes a function as parameter');\n    }\n    _middlewares.push(middleware);\n    var chain = _middlewares.reduceRight(function (prev, cur) {\n      return function (next) {\n        return prev(cur(next));\n      };\n    })(function (partialState) {\n      return _state = _extends({}, _state, partialState);\n    });\n    module.exports.setState = chain;\n    global['$'].setState = chain;\n    module.exports.overwriteState = _middlewares.reduceRight(function (prev, cur) {\n      if (cur.name === '__DEVTOOLS__') {\n        return prev;\n      }\n      return function (next) {\n        return prev(cur(next));\n      };\n    })(function (newState) {\n      return _state = _extends({}, newState);\n    });\n  }\n};\nmodule.exports = exports['default'];\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[3])(3)\n});"]}