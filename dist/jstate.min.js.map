{"version":3,"sources":["jstate.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","jstate","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","showDevTools","popup","open","location","reload","_store","register","devTools","setTimeout","opener","getState","setState","overwriteState","queue","document","write","_devToolsTemplate2","default","Object","defineProperty","value","_devToolsTemplate","obj","__esModule","next","args","oldState","result","push","id","Date","now","toString","Math","random","substr","toUpperCase","action","state","postMessage","./devToolsTemplate.html","./store","2","3","enumerable","get","_devTools","./devTools","4","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","prototype","_extends","assign","target","arguments","source","key","hasOwnProperty","_createClass","defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","Store","middlewares","partialState","context","_len","Array","_key","apply","_len2","_key2","newState","_len3","_key3","concat","reduce","undefined","_len4","_key4"],"mappings":"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","file":"jstate.min.js","sourcesContent":["/*********************************************************\n * jstate - JS state done easy\n * @version v1.0.0\n * @link https://github.com/rannn505/jstate#readme\n * @copyright Copyright (c) 2017 Ran Cohen <rannn505@outlook.com>\n * @license MIT (http://www.opensource.org/licenses/mit-license.php)\n * @Compiled At: 2017-04-29\n  *********************************************************/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.jstate = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showDevTools = showDevTools;\n\nvar _store = require('./store');\n\nvar _devToolsTemplate = require('./devToolsTemplate.html');\n\nvar _devToolsTemplate2 = _interopRequireDefault(_devToolsTemplate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar popup = void 0,\n    queue = [];\n\nvar devTools = function devTools(next) {\n  return function (args) {\n    var oldState = (0, _store.getState)();\n    var result = next(args);\n    queue.push({\n      id: (Date.now().toString(36) + Math.random().toString(36).substr(2, 5)).toUpperCase(),\n      action: args,\n      state: (0, _store.getState)(),\n      oldState: oldState\n    });\n    popup.postMessage('FLUSH', '*');\n    return result;\n  };\n};\nfunction showDevTools() {\n  popup = window.open(null, 'jstate-dev-tools', 'width=400,height=600,menubar=no,location=no,resizable=yes,scrollbars=no,status=no');\n  popup.location.reload();\n  (0, _store.register)(devTools);\n  setTimeout(function () {\n    popup.opener = {\n      getState: _store.getState,\n      setState: _store.setState,\n      overwriteState: _store.overwriteState,\n      register: _store.register,\n      queue: queue\n    };\n    popup.document.write(_devToolsTemplate2.default);\n  }, 10);\n}\n\n},{\"./devToolsTemplate.html\":2,\"./store\":4}],2:[function(require,module,exports){\nmodule.exports = \"<!DOCTYPE html>\\r\\n<html>\\r\\n<head>\\r\\n  <meta charset=\\\"utf-8\\\">\\r\\n  <meta content=\\\"IE=edge\\\" http-equiv=\\\"X-UA-Compatible\\\">\\r\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\">\\r\\n  <title> JState DevTools </title>\\r\\n  <link href=\\\"https://fonts.googleapis.com/css?family=Inconsolata\\\" rel=\\\"stylesheet\\\">\\r\\n  <link href=\\\"https://cdn.rawgit.com/todylu/monaco.ttf/master/monaco.ttf\\\" rel=\\\"stylesheet\\\">\\r\\n  <link href=\\\"https://cdn.rawgit.com/rannn505/jstate/master/src/jsonviewer/jsonviewer.min.css\\\" rel=\\\"stylesheet\\\">\\r\\n  <style>body{position:fixed;top:0;bottom:0;left:0;right:0;padding:0;margin:0;color:#6e6e6e;list-style:none;background-color:#fff;font-family:monaco,Inconsolata,monospace;min-height:325px;min-width:325px}.container{width:100%;height:100%;overflow:hidden;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:column;flex-flow:column}.title{font-size:14px;text-align:center}.btns{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap}.actions{flex:10 2;overflow-y:auto;overflow-x:hidden}.btn{background-color:#fff;border:1px solid #ccc;color:#555;font-family:monospace;border-radius:1px;padding:5px 10px;text-align:center;text-decoration:none;display:inline-block;font-size:14px}.btn:hover{background-color:#ccc}.btn:active{background-color:#c1c1c1}.input{padding:6px 12px;font-size:14px;font-family:Inconsolata,monospace;line-height:1.42857143;color:#555;background-color:#fff;border:1px solid #ccc;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.hr{width:100%}::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:rgba(60,63,65,.8);box-shadow:inset 0 0 6px rgba(0,0,0,.5);-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}</style></head><body>\\r\\n  <div class=\\\"container\\\">\\r\\n    <div class=\\\"actions\\\" id=\\\"actions\\\">\\r\\n    </div>\\r\\n    <div class=\\\"btns\\\">\\r\\n      <input class=\\\"input\\\" placeholder=\\\"setState()\\\" style=\\\"flex:10 2\\\" type=\\\"text\\\" id=\\\"setState\\\">\\r\\n      <button class=\\\"btn\\\" id=\\\"reset\\\">Reset</button>\\r\\n      <button class=\\\"btn\\\" id=\\\"rollback\\\">Rollback</button>\\r\\n    </div>\\r\\n    <div class=\\\"title\\\">\\r\\n      JState DevTools\\r\\n    </div>\\r\\n  </div>\\r\\n  <script src=\\\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\\\"></script><script src=\\\"https://cdn.rawgit.com/rannn505/jstate/master/src/jsonviewer/jsonviewer.min.js\\\"></script><script src=\\\"https://cdnjs.cloudflare.com/ajax/libs/jsondiffpatch/0.2.4/jsondiffpatch.min.js\\\"></script><script>!function(){function renderNodes(){$(\\\"#actions\\\").empty(),$.each(nodes,function(e,n){$(\\\"#actions\\\").prepend('<div id=\\\"'+n.id+'\\\"></div>');var o=$(\\\"#\\\"+n.id);o.jsonviewer(n,e===nodes.length-1),o.append('<hr class=\\\"hr\\\"/>')})}function addNode(e){e.diff=jsondiffpatch.diff(e.oldState,e.state),delete e.oldState,nodes.push(e),renderNodes()}function flush(e){if(0!==e.length)return addNode(e.shift()),flush(e)}if(!window.jQuery)throw new Error(\\\"jQuery is not loaded. please check your network connectivity\\\");var nodes=[];$(window).on(\\\"message\\\",function(){flush(opener.queue)}),$(\\\"#setState\\\").on(\\\"keypress\\\",function(e){var code=e.keyCode?e.keyCode:e.which;if(13===code){e.preventDefault();var input=$(\\\"#setState\\\");try{opener.setState(eval(\\\"(\\\"+input.val()+\\\")\\\")),input.val(\\\"\\\")}catch(e){throw new Error(\\\"Invalid JSON\\\")}}}),$(\\\"#reset\\\").on(\\\"click\\\",function(){nodes=[],opener.overwriteState({}),renderNodes()}),$(\\\"#rollback\\\").on(\\\"click\\\",function(){nodes.pop()&&nodes.length>0?opener.overwriteState(nodes[nodes.length-1].state):opener.overwriteState({}),renderNodes()}),flush(opener.queue)}();</script></body></html>\";\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _store = require('./store');\n\nObject.defineProperty(exports, 'getState', {\n  enumerable: true,\n  get: function get() {\n    return _store.getState;\n  }\n});\nObject.defineProperty(exports, 'setState', {\n  enumerable: true,\n  get: function get() {\n    return _store.setState;\n  }\n});\nObject.defineProperty(exports, 'register', {\n  enumerable: true,\n  get: function get() {\n    return _store.register;\n  }\n});\n\nvar _devTools = require('./devTools');\n\nObject.defineProperty(exports, 'showDevTools', {\n  enumerable: true,\n  get: function get() {\n    return _devTools.showDevTools;\n  }\n});\n\n},{\"./devTools\":1,\"./store\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Store = exports.Store = function () {\n  function Store() {\n    _classCallCheck(this, Store);\n\n    this.state = {};\n    this.middlewares = [];\n  }\n\n  _createClass(Store, [{\n    key: 'getState',\n    value: function getState() {\n      return _extends({}, this.state);\n    }\n  }, {\n    key: 'setState',\n    value: function setState(partialState) {\n      if ((typeof partialState === 'undefined' ? 'undefined' : _typeof(partialState)) !== 'object') {\n        throw new TypeError('setState() takes an object of state variables to update');\n      }\n      this.state = _extends({}, this.state, partialState);\n    }\n  }]);\n\n  return Store;\n}();\n\nvar context = new Store();\nvar getState = exports.getState = function getState() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return Store.prototype.getState.apply(context, args);\n};\nvar setState = exports.setState = function setState() {\n  for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return Store.prototype.setState.apply(context, args);\n};\nvar overwriteState = exports.overwriteState = function overwriteState(newState) {\n  return context.state = _extends({}, newState);\n};\nvar register = exports.register = function register() {\n  for (var _len3 = arguments.length, middlewares = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    middlewares[_key3] = arguments[_key3];\n  }\n\n  context.middlewares = context.middlewares.concat(middlewares);\n  exports.setState = setState = context.middlewares.reduce(function (f, g) {\n    return function () {\n      return f(g.apply(undefined, arguments));\n    };\n  })(function () {\n    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return Store.prototype.setState.apply(context, args);\n  });\n};\n\n},{}]},{},[3])(3)\n});"]}